<!doctype html><html><head><title>PostgreSQL Documentation</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=revised content="2022-08-16T10:43:20 UTC"><title>CRUD SQL queries :: PostgreSQL Documentation</title><link rel="shortcut icon" href=/postgres/images/favicon.png type=image/x-icon><link href=/postgres/css/nucleus.css rel=stylesheet><link href=/postgres/css/font-awesome.min.css rel=stylesheet><link href=/postgres/css/hybrid.css rel=stylesheet><link href=/postgres/css/featherlight.min.css rel=stylesheet><link href=/postgres/css/auto-complete.css rel=stylesheet><link href=/postgres/theme-original/style.css rel=stylesheet><link rel=stylesheet href=/postgres/css/bootstrap.min.css><style type=text/css>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-79101-13","auto"),ga("send","pageview")</script></head><body data-url=/postgres/getting-start/crud-sql/><div id=headermain></div><nav id=sidebar class=showVisitedLinks><div class=highlightable><div id=header-wrapper><div id=header><a class=baselink href=https://mohamedallam1991.github.io/postgres>PostgreSQL Documentation</a></div><div class=searchbox><label for=search-by><i class="fa fa-search"></i></label>
<input data-search-input id=search-by type=text placeholder=Search...>
<span data-search-clear><i class="fa fa-close"></i></span></div></div><ul class=topics><li data-nav-id=/ class=dd-item><a href=/><i class="fa fa-fw fa-home"></i></a></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/getting-start/ class="dd-item alwaysopen haschildren"><div><a href=/postgres/getting-start/><i class='fa fa-rocket'></i> Getting started</a>
<i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://mohamedallam1991.github.io/postgres/getting-start/installation/ class=dd-item><div><a href=/postgres/getting-start/installation/>Installation
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/getting-start/configuration/ class=dd-item><div><a href=/postgres/getting-start/configuration/>Configuration
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/getting-start/crud-sql/ class=dd-item><div><a href=/postgres/getting-start/crud-sql/>CRUD SQL queries
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/basics/ class=dd-item><div><a href=/postgres/basics/><i class='fa fa-hand-o-right'></i> The basics</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/create-page/ class="dd-item haschildren"><div><a href=/postgres/create-page/><i class='fa fa-edit'></i> Create Page</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://mohamedallam1991.github.io/postgres/create-page/homepage/ class=dd-item><div><a href=/postgres/create-page/homepage/>Home page
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/create-page/page-images/ class=dd-item><div><a href=/postgres/create-page/page-images/>About images
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/create-page/page-slide/ class=dd-item><div><a href=/postgres/create-page/page-slide/>Present a Slide
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/content-organisation/ class="dd-item haschildren"><div><a href=/postgres/content-organisation/>Content Organisation</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://mohamedallam1991.github.io/postgres/content-organisation/logo/ class=dd-item><div><a href=/postgres/content-organisation/logo/>Logo placeholder
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/content-organisation/extramenu/ class=dd-item><div><a href=/postgres/content-organisation/extramenu/>Extra menu entries
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/content-organisation/customize-style/ class="dd-item haschildren"><div><a href=/postgres/content-organisation/customize-style/>Customize website look and feel</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://mohamedallam1991.github.io/postgres/content-organisation/customize-style/disable/ class=dd-item><div><a href=/postgres/content-organisation/customize-style/disable/>Disable features
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/content-organisation/customize-style/themestyle/ class=dd-item><div><a href=/postgres/content-organisation/customize-style/themestyle/>Theme styles
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/content-organisation/customize-style/theme-variants/ class=dd-item><div><a href=/postgres/content-organisation/customize-style/theme-variants/>Theme variants
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li></ul></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/ class="dd-item haschildren"><div><a href=/postgres/shortcodes/>Shortcodes</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/alert/ class=dd-item><div><a href=/postgres/shortcodes/alert/>alert
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/attachments/ class=dd-item><div><a href=/postgres/shortcodes/attachments/>attachments
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/button/ class=dd-item><div><a href=/postgres/shortcodes/button/>button
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/children/ class="dd-item haschildren"><div><a href=/postgres/shortcodes/children/>children</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/children/children-1/ class="dd-item haschildren"><div><a href=/postgres/shortcodes/children/children-1/>page 1</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/children/children-1/children-1-1/ class="dd-item haschildren"><div><a href=/postgres/shortcodes/children/children-1/children-1-1/>page 1-1</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/children/children-1/children-1-1/children-1-1-1/ class="dd-item haschildren"><div><a href=/postgres/shortcodes/children/children-1/children-1-1/children-1-1-1/>page 1-1-1</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/children/children-1/children-1-1/children-1-1-1/children-1-1-1-1/ class="dd-item haschildren"><div><a href=/postgres/shortcodes/children/children-1/children-1-1/children-1-1-1/children-1-1-1-1/>page 1-1-1-1</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/children/children-1/children-1-1/children-1-1-1/children-1-1-1-1/children-1-1-1-1-1/ class=dd-item><div><a href=/postgres/shortcodes/children/children-1/children-1-1/children-1-1-1/children-1-1-1-1/children-1-1-1-1-1/>page 1-1-1-1-1</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li></ul></li></ul></li></ul></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/children/children-2/ class="dd-item haschildren"><div><a href=/postgres/shortcodes/children/children-2/>page 2</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/children/children-2/test3/ class=dd-item><div><a href=/postgres/shortcodes/children/children-2/test3/>page test 3
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/children/children-3/ class=dd-item><div><a href=/postgres/shortcodes/children/children-3/>page 3</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/children/test/ class=dd-item><div><a href=/postgres/shortcodes/children/test/>page test
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/excerpt/ class=dd-item><div><a href=/postgres/shortcodes/excerpt/>excerpt
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/excerpt-include/ class=dd-item><div><a href=/postgres/shortcodes/excerpt-include/>excerpt-include
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/expand/ class=dd-item><div><a href=/postgres/shortcodes/expand/>expand
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/icon/ class=dd-item><div><a href=/postgres/shortcodes/icon/>icon
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/mermaid/ class=dd-item><div><a href=/postgres/shortcodes/mermaid/>mermaid
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/notice/ class=dd-item><div><a href=/postgres/shortcodes/notice/>notice
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/panel/ class=dd-item><div><a href=/postgres/shortcodes/panel/>panel
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/shortcodes/revealjs/ class=dd-item><div><a href=/postgres/shortcodes/revealjs/>revealjs
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://mohamedallam1991.github.io/postgres/search/ class=dd-item><div><a href=/postgres/search/>About the Search Engine</a><i class="fa fa-circle-thin read-icon"></i></div></li><section id=shortcuts><li role><h3>More</h3><a href=https://github.com/mohamedallam1991/postgres rel=noopener><i class='fa fa-github'></i> <label>Github repo</label></a></li><li role><a href=https://github.com/vjeantet/hugo-theme-docdock/archive/master.zip rel=noopener><i class='fa fa-cloud-download'></i> <label>Download</label></a></li><li role><a href=https://github.com/mohamedallam1991/postgres rel=noopener><i class='fa fa-bookmark'></i> <label>Head to Docs</label></a></li><li role><a href=/postgres/credits rel=noopener><i class='fa fa-bullhorn'></i> <label>Credits</label></a></li></section><a id=clear-history href=# data-clear-history-toggle><i class="fa fa-history"></i> Clear History</a><hr><li></li></ul><section id=footer><center><a class=github-button href=https://github.com/mohamedallam1991/postgres/archive/master.zip data-icon=octicon-cloud-download aria-label="Download mohamedallam1991/postgres on GitHub">Download</a>
<a class=github-button href=https://github.com/mohamedallam1991/postgres data-icon=octicon-star data-show-count=false aria-label="Star mohamedallam1991/postgres on GitHub">Star</a>
<a class=github-button href=https://github.com/mohamedallam1991/postgres/fork data-icon=octicon-repo-forked data-show-count=true aria-label="Fork mohamedallam1991/postgres on GitHub">Fork</a></center>
<script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div id=top-bar><div id=top-github-link><a class=github-link href=https://github.com/vjeantet/hugo-theme-docdock/edit/master/exampleSite/content/getting-start/crud-sql.md target=blank><i class="fa fa-code-fork"></i>
Improve this page</a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fa fa-bars"></i></a></span>
<span id=toc-menu><i class="fa fa-list-alt"></i></span>
<span class=links><a href=https://mohamedallam1991.github.io/postgres/>PostgreSQL dcoumentation for beginners</a> > <a href=https://mohamedallam1991.github.io/postgres/getting-start/>Getting started</a> > CRUD SQL queries</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#create-table>Create Table</a></li><li><a href=#retrieve-all-data-from-customers>Retrieve all data from customers</a></li><li><a href=#insert-a-record>Insert a record</a><ul><li><a href=#quotes-in-the-data>Quotes in the data</a></li><li><a href=#insert-multiple-records>Insert multiple records</a></li><li><a href=#returning>Returning</a></li></ul></li><li><a href=#update-a-record>Update a record</a><ul><li><a href=#update-a-row>Update a row</a></li><li><a href=#update-one-column-and-return-the-rows>Update one column and return the rows</a></li><li><a href=#update-one-column-and-return-by-column-name>Update one column and return by column name</a></li></ul></li><li><a href=#update-multiple-columns>Update Multiple columns</a><ul><li><a href=#update-multiple-columns-and-returning>Update Multiple columns and returning</a></li><li><a href=#update-multiple-columns-and-returning-a-column-name>Update Multiple columns and returning a column name</a></li></ul></li><li><a href=#update-all-records-in-a-database>Update all records in a database</a></li><li><a href=#delete-a-record>Delete a record</a></li><li><a href=#delete-all-records>Delete all records</a></li><li><a href=#upsert>UPSERT</a></li></ul></nav></div></div></div><div id=body-inner><h1>CRUD SQL queries</h1><p>The following steps will help you get started as quickly as possible, manipulating SQL data.</p><h2 id=intro>Intro</h2><p>Lets create a customer or two, Assuming you have <a href=/postgres/getting-start/installation/>installed</a> and <a href=/postgres/getting-start/configuration/>configured</a>, Its time to get the hang of CRUD on your fresh database.</p><p>So given we need to store customers in our database, we create <code>customers</code> table, in which we store informations like:</p><ul><li>First name</li><li>Last name</li><li>Email</li><li>Age</li></ul><p>In theory, First Name and Last Name or Email, are a text, in SQL, there is many text types, but to keep it simple we will use <code>VARCHAR</code>, think of it as a <code>string</code> type, but with a predefined max length we provide, 150 in our case is the maximum number of charachters for a first name or last name. And 50 charachters for the email.</p><p>As for age, its obviously a numeric type, we will use integer.</p><p>This is what we will do:</p><ol><li>Create Table</li><li>With columns/fields in the table (name and data type)</li><li>create a customer read, update, delete.</li></ol><h2 id=create-table>Create Table</h2><p>Lets first create a table, with the predefined rows, customer which is auto increment id, set by</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=display:flex><span><span style=color:#75715e>-- CREATE TABLE tableName (
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>-- column name followed by column data type or any conditions to the column
</span></span></span><span style=display:flex><span><span style=color:#75715e>--);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>CREATE</span> <span style=color:#00a8c8>TABLE</span> <span style=color:#111>customers</span> <span style=color:#111>(</span>
</span></span><span style=display:flex><span>	<span style=color:#111>customer_id</span> <span style=color:#111>SERIAL</span> <span style=color:#00a8c8>PRIMARY</span> <span style=color:#00a8c8>KEY</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>	<span style=color:#111>first_name</span> <span style=color:#111>VARCHAR</span><span style=color:#111>(</span><span style=color:#ae81ff>150</span><span style=color:#111>),</span>
</span></span><span style=display:flex><span>	<span style=color:#111>last_name</span> <span style=color:#111>VARCHAR</span><span style=color:#111>(</span><span style=color:#ae81ff>50</span><span style=color:#111>),</span>
</span></span><span style=display:flex><span>	<span style=color:#111>email</span> <span style=color:#111>VARCHAR</span><span style=color:#111>(</span><span style=color:#ae81ff>50</span><span style=color:#111>),</span>
</span></span><span style=display:flex><span>	<span style=color:#111>age</span> <span style=color:#111>INT</span>
</span></span><span style=display:flex><span><span style=color:#111>);</span>
</span></span></code></pre></div><aside><div class="alert alert-info" role=alert>💡 To check the table <code>SELECT * FROM customers</code> it will return an empty table, with column names and types.</div></aside><h2 id=retrieve-all-data-from-customers>Retrieve all data from customers</h2><p>To retrieve all data of a column</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- SELECT * FROM tableName
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#00a8c8>FROM</span> <span style=color:#111>customers</span>
</span></span></code></pre></div><p>If you might have noticed, the customer_id is auto incremented and is set Postgres, it will keep auto-incrementing.</p><h2 id=insert-a-record>Insert a record</h2><p>Let’s insert a row of data.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- INSERT INTO tableName (column1, column2, column3.....)
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- VALUES (value1, value2, value3.....)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>INSERT</span> <span style=color:#00a8c8>INTO</span> <span style=color:#111>customers</span> <span style=color:#111>(</span><span style=color:#111>first_name</span><span style=color:#111>,</span> <span style=color:#111>last_name</span><span style=color:#111>,</span> <span style=color:#111>email</span><span style=color:#111>,</span> <span style=color:#111>age</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>VALUES</span> <span style=color:#111>(</span><span style=color:#d88200>&#39;Mohamed&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;ALLAM&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;a@b.com&#39;</span><span style=color:#111>,</span> <span style=color:#ae81ff>30</span><span style=color:#111>);</span>
</span></span></code></pre></div><h3 id=quotes-in-the-data>Quotes in the data</h3><p>If you have quotes in your insertion, simply double the one you want to insert, This indicates to Postgres to escape the quotes.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- To escape quotes we have to double them so, John&#39;s, becomes John&#39;&#39;s
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>INSERT</span> <span style=color:#00a8c8>INTO</span> <span style=color:#111>customers</span> <span style=color:#111>(</span><span style=color:#111>first_name</span><span style=color:#111>,</span> <span style=color:#111>last_name</span><span style=color:#111>,</span> <span style=color:#111>email</span><span style=color:#111>,</span> <span style=color:#111>age</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>VALUES</span> <span style=color:#111>(</span><span style=color:#d88200>&#39;Mohamed&#39;&#39;s&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;ALLAM&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;a@b.com&#39;</span><span style=color:#111>,</span> <span style=color:#ae81ff>30</span><span style=color:#111>);</span>
</span></span></code></pre></div><h3 id=insert-multiple-records>Insert multiple records</h3><p>We often want to insert multiple data at once, its easy.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- INSERT INTO tableName (column1, column2, ....)
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- VALUES
</span></span></span><span style=display:flex><span><span style=color:#75715e>--(&#39;value1&#39;,&#39;value2&#39;)
</span></span></span><span style=display:flex><span><span style=color:#75715e>--(&#39;value1&#39;,&#39;value2&#39;)
</span></span></span><span style=display:flex><span><span style=color:#75715e>--(&#39;value1&#39;,&#39;value2&#39;)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>INSERT</span> <span style=color:#00a8c8>INTO</span> <span style=color:#111>customers</span> <span style=color:#111>(</span><span style=color:#111>first_name</span><span style=color:#111>,</span> <span style=color:#111>last_name</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>VALUES</span>
</span></span><span style=display:flex><span><span style=color:#111>(</span><span style=color:#d88200>&#39;Mohamed&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;Allam&#39;</span><span style=color:#111>),</span>
</span></span><span style=display:flex><span><span style=color:#111>(</span><span style=color:#d88200>&#39;Jane&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;Doe&#39;</span><span style=color:#111>),</span>
</span></span><span style=display:flex><span><span style=color:#111>(</span><span style=color:#d88200>&#39;John&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;Doe&#39;</span><span style=color:#111>);</span>
</span></span></code></pre></div><h3 id=returning>Returning</h3><p>If we want to return all the rows and data, we inserted we run:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- INSERT INTO tableName (column1, column2...)
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- VALUES (&#39;value1&#39;, &#39;value2&#39;) returning *;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>INSERT</span> <span style=color:#00a8c8>INTO</span> <span style=color:#111>customers</span> <span style=color:#111>(</span><span style=color:#111>first_name</span><span style=color:#111>,</span> <span style=color:#111>last_name</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>VALUES</span>
</span></span><span style=display:flex><span><span style=color:#111>(</span><span style=color:#d88200>&#39;John&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;Doe&#39;</span><span style=color:#111>)</span> <span style=color:#111>returning</span> <span style=color:#f92672>*</span><span style=color:#111>;</span>
</span></span></code></pre></div><p>If however we want to return just a specific row, we return the name of the column:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- INSERT INTO tableName (column1, column2...)
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- VALUES (&#39;value1&#39;, &#39;value2&#39;) returning columnName;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>INSERT</span> <span style=color:#00a8c8>INTO</span> <span style=color:#111>customers</span> <span style=color:#111>(</span><span style=color:#111>first_name</span><span style=color:#111>,</span> <span style=color:#111>last_name</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>VALUES</span>
</span></span><span style=display:flex><span><span style=color:#111>(</span><span style=color:#d88200>&#39;John&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;Doe&#39;</span><span style=color:#111>)</span> <span style=color:#111>returning</span> <span style=color:#111>customer_id</span><span style=color:#111>;</span>
</span></span></code></pre></div><h2 id=update-a-record>Update a record</h2><h3 id=update-a-row>Update a row</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- UPDATE tablename
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- SET columnname = &#39;new value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- WHERE columnname = &#39;value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>UPDATE</span> <span style=color:#111>customers</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>SET</span> <span style=color:#111>email</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;yes@aol.com&#39;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>WHERE</span> <span style=color:#d88200>&#34;customer_id&#34;</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
</span></span></code></pre></div><h3 id=update-one-column-and-return-the-rows>Update one column and return the rows</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- UPDATE tablename
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- SET columnname = &#39;new value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- WHERE columnname = &#39;value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- RETURNING *;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>UPDATE</span> <span style=color:#111>customers</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>SET</span> <span style=color:#111>email</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;yes@aol.com&#39;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>WHERE</span> <span style=color:#d88200>&#34;customer_id&#34;</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span><span style=color:#111>returning</span> <span style=color:#f92672>*</span><span style=color:#111>;</span>
</span></span></code></pre></div><h3 id=update-one-column-and-return-by-column-name>Update one column and return by column name</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- UPDATE tablename
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- SET columnname = &#39;new value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- WHERE columnname = &#39;value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- RETURNING columnName;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>UPDATE</span> <span style=color:#111>customers</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>SET</span> <span style=color:#111>email</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;yes@aol.com&#39;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>WHERE</span> <span style=color:#d88200>&#34;customer_id&#34;</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span><span style=color:#111>returning</span> <span style=color:#111>customer_id</span><span style=color:#111>;</span>
</span></span></code></pre></div><h2 id=update-multiple-columns>Update Multiple columns</h2><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- UPDATE tablename
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- SET columnname = &#39;new value&#39;, anotherColumn = &#39;some new value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- WHERE columnname = &#39;value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>UPDATE</span> <span style=color:#111>customers</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>SET</span> <span style=color:#111>email</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;yes@aol.com&#39;</span><span style=color:#111>,</span> <span style=color:#111>age</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>WHERE</span> <span style=color:#111>first_name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;Mohamed&#39;</span>
</span></span></code></pre></div><h3 id=update-multiple-columns-and-returning>Update Multiple columns and returning</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- UPDATE tablename
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- SET columnname = &#39;new value&#39;, anotherColumn = &#39;some new value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- WHERE columnname = &#39;value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- RETURNING *;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>UPDATE</span> <span style=color:#111>customers</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>SET</span> <span style=color:#111>email</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;yes@aol.com&#39;</span><span style=color:#111>,</span> <span style=color:#111>age</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>WHERE</span> <span style=color:#111>first_name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;Mohamed&#39;</span> <span style=color:#111>returning</span> <span style=color:#f92672>*</span><span style=color:#111>;</span>
</span></span></code></pre></div><h3 id=update-multiple-columns-and-returning-a-column-name>Update Multiple columns and returning a column name</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- UPDATE tablename
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- SET columnname = &#39;new value&#39;, anotherColumn = &#39;some new value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- WHERE columnname = &#39;value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- RETURNING *;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>UPDATE</span> <span style=color:#111>customers</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>SET</span> <span style=color:#111>email</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;yes@aol.com&#39;</span><span style=color:#111>,</span> <span style=color:#111>age</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>WHERE</span> <span style=color:#111>first_name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;Mohamed&#39;</span> <span style=color:#111>returning</span> <span style=color:#111>customer_id</span><span style=color:#111>;</span>
</span></span></code></pre></div><h2 id=update-all-records-in-a-database>Update all records in a database</h2><p>If you update with no where clause, you would update all records in a database, so be careful</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- UPDATE tablename
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- SET columnname = &#39;new value&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#00a8c8>UPDATE</span> <span style=color:#111>customers</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>SET</span> <span style=color:#111>age</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;30&#39;</span>
</span></span></code></pre></div><h2 id=delete-a-record>Delete a record</h2><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#00a8c8>DELETE</span> <span style=color:#00a8c8>FROM</span> <span style=color:#111>customers</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>where</span> <span style=color:#111>customer_id</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
</span></span></code></pre></div><h2 id=delete-all-records>Delete all records</h2><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#00a8c8>DELETE</span> <span style=color:#00a8c8>FROM</span> <span style=color:#111>customers</span>
</span></span></code></pre></div><h2 id=upsert>UPSERT</h2><p>So you might have guessed, upsert, is made up of insert and update. This instructs postgres to update row if it already exists, otherwise it will perform an insert.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- INSERT INTO tableName (column_list)
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- VALUES (value_list)
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- ON CONFLICT target action;
</span></span></span></code></pre></div><p>The action is:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- ON CONFLICT DO NOTHING
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- ON CONFLICT DO UPDATE SET column_1 = value_1
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- WHERE some_column = value
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#00a8c8>CREATE</span> <span style=color:#00a8c8>TABLE</span> <span style=color:#111>t_tags</span> <span style=color:#111>(</span>
</span></span><span style=display:flex><span>	<span style=color:#111>id</span> <span style=color:#111>SERIAL</span> <span style=color:#00a8c8>PRIMARY</span> <span style=color:#00a8c8>KEY</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>	<span style=color:#111>tag</span> <span style=color:#111>text</span> <span style=color:#00a8c8>UNIQUE</span><span style=color:#111>,</span> <span style=color:#75715e>--enforce unique case sensitive value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#111>update_date</span> <span style=color:#00a8c8>TIMESTAMP</span> <span style=color:#00a8c8>DEFAULT</span> <span style=color:#111>NOW</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>);</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#00a8c8>INSERT</span> <span style=color:#00a8c8>INTO</span> <span style=color:#111>t_tags</span> <span style=color:#111>(</span><span style=color:#111>tag</span><span style=color:#111>)</span> <span style=color:#00a8c8>values</span>
</span></span><span style=display:flex><span><span style=color:#111>(</span><span style=color:#d88200>&#39;pen&#39;</span><span style=color:#111>),</span>
</span></span><span style=display:flex><span><span style=color:#111>(</span><span style=color:#d88200>&#39;pencil&#39;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>returning</span> <span style=color:#f92672>*</span><span style=color:#111>;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#00a8c8>INSERT</span> <span style=color:#00a8c8>INTO</span> <span style=color:#111>t_tags</span><span style=color:#111>(</span><span style=color:#111>tag</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>VALUES</span> <span style=color:#111>(</span><span style=color:#d88200>&#39;pen&#39;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>ON</span> <span style=color:#111>CONFLICT</span> <span style=color:#111>(</span><span style=color:#111>tag</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>DO</span> <span style=color:#00a8c8>NOTHING</span><span style=color:#111>;</span>
</span></span></code></pre></div><aside>💡 If we do select *, we would see Ids and inserts to our table, then removes it.</aside><p>Mention if we check on the Ids</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#00a8c8>INSERT</span> <span style=color:#00a8c8>INTO</span> <span style=color:#111>t_tags</span><span style=color:#111>(</span><span style=color:#111>tag</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>VALUES</span> <span style=color:#111>(</span><span style=color:#d88200>&#39;pen&#39;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>ON</span> <span style=color:#111>CONFLICT</span> <span style=color:#111>(</span><span style=color:#111>tag</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>DO</span> <span style=color:#00a8c8>UPDATE</span> <span style=color:#00a8c8>SET</span>
</span></span><span style=display:flex><span><span style=color:#111>tag</span> <span style=color:#f92672>=</span> <span style=color:#111>EXCLUDED</span><span style=color:#111>.</span><span style=color:#111>tag</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>update_date</span> <span style=color:#f92672>=</span> <span style=color:#111>NOW</span><span style=color:#111>();</span> <span style=color:#75715e>-- just to show we excluded the update we made
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#00a8c8>INSERT</span> <span style=color:#00a8c8>INTO</span> <span style=color:#111>t_tags</span><span style=color:#111>(</span><span style=color:#111>tag</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>VALUES</span> <span style=color:#111>(</span><span style=color:#d88200>&#39;pen&#39;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>ON</span> <span style=color:#111>CONFLICT</span> <span style=color:#111>(</span><span style=color:#111>tag</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>DO</span> <span style=color:#00a8c8>UPDATE</span> <span style=color:#00a8c8>SET</span>
</span></span><span style=display:flex><span><span style=color:#111>tag</span> <span style=color:#f92672>=</span> <span style=color:#111>EXCLUDED</span><span style=color:#111>.</span><span style=color:#111>tag</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>update_date</span> <span style=color:#f92672>=</span> <span style=color:#111>NOW</span><span style=color:#111>();</span> <span style=color:#75715e>-- just to show we excluded the update we made
</span></span></span></code></pre></div><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/postgres/getting-start/configuration/ title=Configuration><i class="fa fa-chevron-left"></i><label>Configuration</label></a>
<a class="nav nav-next" href=/postgres/basics/ title="The basics" style=margin-right:0><label>The basics</label><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/postgres/js/jquery-2.x.min.js></script>
<script type=text/javascript>var baseurl="https://mohamedallam1991.github.io/postgres"</script><script src=/postgres/js/clipboard.min.js></script>
<script src=/postgres/js/featherlight.min.js></script>
<script src=/postgres/js/html5shiv-printshiv.min.js></script>
<script src=/postgres/js/modernizr.custom.71422.js></script>
<script src=/postgres/js/docdock.js></script>
<script type=text/javascript src=/postgres/js/lunr.min.js></script>
<script type=text/javascript src=/postgres/js/auto-complete.js></script>
<script type=text/javascript src=/postgres/js/search.js></script>
<script src=/postgres/theme-original/script.js></script>
<script src=https://mohamedallam1991.github.io/postgres/js/scripts.min.js></script></body></html>